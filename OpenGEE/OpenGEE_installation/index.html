



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../img/logo/logo48.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Installation of OpenGEE - 解译星球 -> IntPlanet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-158661759-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#opengee" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="解译星球 -> IntPlanet" class="md-header-nav__button md-logo">
          
            <img src="../../img/logo/logo128.ico" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              解译星球 -> IntPlanet
            </span>
            <span class="md-header-nav__topic">
              
                Installation of OpenGEE
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." class="md-tabs__link">
          Home
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../IntPlanet/IntPlanet/" class="md-tabs__link">
          IntPlanet
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../RS/RS/" class="md-tabs__link">
          RS
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../GIS/GIS/" class="md-tabs__link">
          GIS
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../GEE/GEE/" class="md-tabs__link">
          GEE
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../OpenGEE/" class="md-tabs__link md-tabs__link--active">
          OpenGEE
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Cesium/Cesium/" class="md-tabs__link">
          Cesium
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Recruitment2020/" class="md-tabs__link">
          JOIN US!
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="解译星球 -> IntPlanet" class="md-nav__button md-logo">
      
        <img src="../../img/logo/logo128.ico" width="48" height="48">
      
    </a>
    解译星球 -> IntPlanet
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Home
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../MkDocs_intro/" title="How We Build this Site" class="md-nav__link">
      How We Build this Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Material_for_MkDocs/" title="Theme this Site Use" class="md-nav__link">
      Theme this Site Use
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      IntPlanet
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        IntPlanet
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../IntPlanet/IntPlanet/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      RS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        RS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../RS/RS/" title="Introduction of RS" class="md-nav__link">
      Introduction of RS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      GIS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        GIS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../GIS/GIS/" title="Introduction of GIS" class="md-nav__link">
      Introduction of GIS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      GEE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        GEE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../GEE/GEE/" title="Introduction of GEE" class="md-nav__link">
      Introduction of GEE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../GEE/GEE_python_env/" title="GEE Python Environment" class="md-nav__link">
      GEE Python Environment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      OpenGEE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        OpenGEE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../OpenGEE/" title="Introduction of OpenGEE" class="md-nav__link">
      Introduction of OpenGEE
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Installation of OpenGEE
      </label>
    
    <a href="./" title="Installation of OpenGEE" class="md-nav__link md-nav__link--active">
      Installation of OpenGEE
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一、前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    二、准备工作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-git" class="md-nav__link">
    2.1 安装 Git
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-git-lfs" class="md-nav__link">
    2.2 安装 Git LFS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3 处理依赖关系
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opengee_1" class="md-nav__link">
    三、OpenGEE 编译
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 文件下载
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 源码编译
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    四、文档编译
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 处理依赖关系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2 文档组织结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3 文档编译
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4 更改文档
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    五、编译安装程序
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fusion-server" class="md-nav__link">
    六、安装 Fusion 与 Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-fusion" class="md-nav__link">
    6.1 安装 Fusion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-server" class="md-nav__link">
    6.2 安装 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    6.3 安装运行时依赖
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64" class="md-nav__link">
    6.4 安装教程数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-fusion-server" class="md-nav__link">
    6.5 卸载 Fusion 与 Server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#portable-server" class="md-nav__link">
    七、构建与安装 Portable Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    7.1 依赖关系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-linux-portable-server" class="md-nav__link">
    7.2 Linux 下构建 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-linux-portable-server" class="md-nav__link">
    7.3 Linux 下安装 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-linux-portable-server" class="md-nav__link">
    7.4  Linux 下运行 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-windows-portable-server" class="md-nav__link">
    7.4 Windows 下构建与安装 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#75-mac-os-portable-server" class="md-nav__link">
    7.5 Mac OS 下构建与安装 Portable Server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    八、总结
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Cesium
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Cesium
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cesium/Cesium/" title="Introduction of Cesium" class="md-nav__link">
      Introduction of Cesium
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      JOIN US!
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        JOIN US!
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Recruitment2020/" title="JOIN US RIGHT NEW!" class="md-nav__link">
      JOIN US RIGHT NEW!
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="About & Contact" class="md-nav__link">
      About & Contact
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    一、前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    二、准备工作
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-git" class="md-nav__link">
    2.1 安装 Git
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-git-lfs" class="md-nav__link">
    2.2 安装 Git LFS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3 处理依赖关系
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opengee_1" class="md-nav__link">
    三、OpenGEE 编译
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 文件下载
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 源码编译
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    四、文档编译
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 处理依赖关系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    4.2 文档组织结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3 文档编译
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4 更改文档
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    五、编译安装程序
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fusion-server" class="md-nav__link">
    六、安装 Fusion 与 Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-fusion" class="md-nav__link">
    6.1 安装 Fusion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-server" class="md-nav__link">
    6.2 安装 Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    6.3 安装运行时依赖
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64" class="md-nav__link">
    6.4 安装教程数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-fusion-server" class="md-nav__link">
    6.5 卸载 Fusion 与 Server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#portable-server" class="md-nav__link">
    七、构建与安装 Portable Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71" class="md-nav__link">
    7.1 依赖关系
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-linux-portable-server" class="md-nav__link">
    7.2 Linux 下构建 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-linux-portable-server" class="md-nav__link">
    7.3 Linux 下安装 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-linux-portable-server" class="md-nav__link">
    7.4  Linux 下运行 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-windows-portable-server" class="md-nav__link">
    7.4 Windows 下构建与安装 Portable Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#75-mac-os-portable-server" class="md-nav__link">
    7.5 Mac OS 下构建与安装 Portable Server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    八、总结
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p><img alt="home_classifier" src="../../img/Home/home_classifier.png" /></p>
<h1 id="opengee"><strong>OpenGEE 编译与安装指南</strong><a class="headerlink" href="#opengee" title="Permanent link">&para;</a></h1>
<hr />
<h2 id="_1">一、前言<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>本文介绍 <strong>OpenGEE</strong> 的源码编译、文档编译、软件包构建、软件包安装及便携式服务器的构建与安装，主要参考来自 Github 仓库上的说明文档：</p>
<ul>
<li><a href="https://github.com/google/earthenterprise/wiki/Build-Instructions">Build Instructions</a></li>
<li><a href="https://github.com/google/earthenterprise/blob/master/earth_enterprise/BUILD_Ubuntu.md">GEE Build Setup for Ubuntu</a></li>
<li><a href="https://github.com/google/earthenterprise/blob/master/earth_enterprise/BUILD.md">Building Earth Enterprise Fusion and Server</a></li>
<li><a href="https://github.com/google/earthenterprise/blob/master/docs/geedocs/docsrc/BUILD_DOCS.md">Build Instructions for Open GEE Documentation</a></li>
<li><a href="https://github.com/google/earthenterprise/wiki/Install-Fusion-or-Earth-Server">Install Fusion or Earth Server</a></li>
<li><a href="https://github.com/google/earthenterprise/wiki/Shared-GEE-Assets">Shared GEE Assets</a></li>
<li><a href="https://github.com/google/earthenterprise/wiki/Portable-Server">Portable Server</a></li>
</ul>
<h2 id="_2">二、准备工作<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p><strong>OpenGEE</strong> 当前只支持在 64 位版本的 <a href="http://releases.ubuntu.com/xenial/">Ubuntu 16.04 LTS</a>、<a href="https://www.redhat.com/en">RHEL 6</a>、<a href="https://www.redhat.com/en">RHEL 7</a>、<a href="http://isoredirect.centos.org/centos/6">CentOS 6</a> 和 <a href="http://isoredirect.centos.org/centos/6">CentOS 7</a> 的操作系统上进行构建，本文基于 <a href="http://releases.ubuntu.com/xenial">Ubuntu 16.04.6</a> 进行编译安装，参考 <a href="https://github.com/google/earthenterprise/blob/master/earth_enterprise/BUILD_Ubuntu.md">GEE Build Setup for Ubuntu</a> 对 Ubuntu 环境进行初始化。</p>
<h4 id="21-git">2.1 安装 Git<a class="headerlink" href="#21-git" title="Permanent link">&para;</a></h4>
<p>Ubuntu 软件仓库自带 Git，可直接命令安装：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo apt-get install -y git
</code></pre></div>
</td></tr></table>

<p>也可使用 Git 仓库安装最新版：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo add-apt-repository ppa:git-core/ppa
sudo apt-get update
sudo apt-get install -y git
</code></pre></div>
</td></tr></table>

<h4 id="22-git-lfs">2.2 安装 Git LFS<a class="headerlink" href="#22-git-lfs" title="Permanent link">&para;</a></h4>
<p>执行如下命令安装 Git 大文件支持系统：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh <span class="p">|</span> sudo bash
sudo apt-get install -y git-lfs
</code></pre></div>
</td></tr></table>

<h4 id="23">2.3 处理依赖关系<a class="headerlink" href="#23" title="Permanent link">&para;</a></h4>
<p>编译 <strong>OpenGEE</strong> 之前需要安装好编译工具链和相关依赖库，注意只支持 Python 2.7：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo apt-get install -y <span class="se">\</span>
    alien autoconf automake bison++ bisonc++ cmake doxygen dpkg <span class="se">\</span>
    flex freeglut3-dev g++ gcc gettext <span class="se">\</span>
    libboost-all-dev libc6 libc6-dev libcap-dev libfreetype6 libfreetype6-dev <span class="se">\</span>
    libgdbm-dev libgeos-dev libgeos++-dev libgif-dev libgtest-dev <span class="se">\</span>
    libjpeg-dev libjpeg8-dev libmng-dev libogdi3.2-dev <span class="se">\</span>
    libperl4-corelibs-perl libpng12-0 libpng12-dev libpq-dev libproj-dev <span class="se">\</span>
    libstdc++6 libtool <span class="se">\</span>
    libx11-dev libxcursor-dev libxerces-c-dev libxft-dev libxinerama-dev <span class="se">\</span>
    libxml2-dev libxml2-utils libxmu-dev libxrandr-dev libyaml-cpp-dev <span class="se">\</span>
    openssl libpcre3 libpcre3-dev <span class="se">\</span>
    python-dev python-imaging python-psycopg2 <span class="se">\</span>
    python-setuptools python2.7 python2.7-dev python-lxml python-git <span class="se">\</span>
    scons shunit2 swig xorg-dev zlib1g-dev
</code></pre></div>
</td></tr></table>

<h2 id="opengee_1">三、OpenGEE 编译<a class="headerlink" href="#opengee_1" title="Permanent link">&para;</a></h2>
<h4 id="31">3.1 文件下载<a class="headerlink" href="#31" title="Permanent link">&para;</a></h4>
<p>下载 <strong>OpenGEE</strong> 发行版：<a href="https://github.com/google/earthenterprise/releases">https://github.com/google/earthenterprise/releases</a>，注意：</p>
<ul>
<li>不要使用国内 IP 克隆项目，龟速；</li>
<li>不要使用源码进行编译，因为源码不含 <code>git-lfs</code> 文件，无法成功构建。</li>
</ul>
<p>本文使用稳定发行版 <a href="https://github.com/google/earthenterprise/releases/tag/5.3.2-1244.74">Open GEE 5.3.2 final release (build 5.3.2-1244.74)</a> 下的 <a href="https://github.com/google/earthenterprise/releases/download/5.3.2-1244.74/earthenterprise.5.3.2-1244.74.tar.gz">earthenterprise.5.3.2-1244.74.tar.gz</a> 文件进行构建。</p>
<h4 id="32">3.2 源码编译<a class="headerlink" href="#32" title="Permanent link">&para;</a></h4>
<p><strong>OpenGEE</strong> 使用 <a href="https://github.com/SCons/scons">SCons</a> 构建源码，指令中有下列选项：</p>
<ul>
<li><code>internal=1</code>：用无优化的代码构建，最适合开发和调试；</li>
<li><code>optimize=1</code>：用优化过的代码构建，但会包含一些调试信息；</li>
<li><code>release=1</code>：用优化过的代码构建，不包含任何调试信息；</li>
<li><code>build_folder=some_path</code>：指定输出程序的放置目录，可以是相对路径或绝对路径。如果是相对路径，则它将相对于 <code>earth_enterprise\src</code>。若不指定，则使用默认路径 <code>earth_enterprise\src</code>；</li>
<li><code>cache_dir=some_path</code>：（实验性功能）应该是 SCons 用来缓存构建输出的绝对路径。当前，此参数应于使用 SCons 缓存测试构建。使用 SCons 缓存存在一些未解决的问题，那些正在研究这些问题的人可以使用此选项来测试其更改；</li>
<li><code>-j#</code>：指定处理器可并发核数，用一个整数代替 <code>#</code>，它应该大致匹配处理器可用核数；</li>
<li><code>--debug=stacktrace</code>：如果在 SCons 脚本中有一个错误，这个选项将给出关于如何调试它的更详细的信息；</li>
<li><code>--config=force</code>：如果不小心删除了 <code>.sconf_temp</code> 目录或对系统构建库进行了某些更改，请使用该参数来强制重新运行配置，否则 SCons 构建可能会抛出缺少库的错误。</li>
</ul>
<p>本文使用如下命令进行源码编译：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> earthenterprise/earth_enterprise <span class="c1"># 进入编译目录</span>
scons -j4 <span class="nv">release</span><span class="o">=</span><span class="m">1</span> build           <span class="c1"># 四核并发编译，视具体核心数修改之</span>
</code></pre></div>
</td></tr></table>

<p>等待约二十分钟，若看到如下信息，说明 <strong>OpenGEE</strong> 编译成功。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sent <span class="m">118</span>,148,878 bytes  received <span class="m">1</span>,599 bytes  <span class="m">78</span>,766,984.67 bytes/sec
total size is <span class="m">118</span>,115,087  speedup is <span class="m">1</span>.00
Touch<span class="o">(</span><span class="s2">&quot;NATIVE-REL-x86_64/bin/tests/fusion&quot;</span><span class="o">)</span>
scons: <span class="k">done</span> building targets.
scons: <span class="k">done</span> building targets.
</code></pre></div>
</td></tr></table>

<p>编译成功后可运行单元测试：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> src/NATIVE-REL-x86_64/bin/tests
./RunAllTests.pl
</code></pre></div>
</td></tr></table>

<p>注意，<code>cd</code> 命令后面的内容要根据 SCons 参数进行适应性修改，若使用 <code>internal=1</code> 或 <code>optimize=1</code> 参数，而非 <code>release=1</code>，则 <code>REL</code> 需要修改（Ps：<code>Tab</code> 键补全来的更方便）。此外，若指定了 <code>build_folder</code>，则要修改测试目录所在路径。本文的测试结果如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>Running AssetDefsExtra_unittest ...                      SUCCEEDED
Running AssetFactory_unittest ...                        SUCCEEDED
Running AssetSerializer_unittest ...                     SUCCEEDED
Running bounds_tracker_test ...                          SUCCEEDED
Running boxfilter_test ...                               SUCCEEDED
Running cachedreadaccessor_unittest ...                  SUCCEEDED
Running crc_unittest ...                                 SUCCEEDED
Running createmetadbroot_unittest ...                    SUCCEEDED
Running curl_request_unittest ...                        SUCCEEDED
Running cutspec_test ...                                 SUCCEEDED
Running dbmanifest_tests ...                             SUCCEEDED
Running dbroot_generator_tests ...                       SUCCEEDED
Running dbroot_google_url_remover_test ...               SUCCEEDED
Running dottedversion_tests ...                          SUCCEEDED
Running endian_tests ...                                 SUCCEEDED
Running etencoder_tests ...                              SUCCEEDED
Running Featherer_unittest ...                           SUCCEEDED
Running file_packer_test ...                             SUCCEEDED
Running filebundle_unittest ...                          SUCCEEDED
Running filebundle_unittest__port ...                    SUCCEEDED
Running filepool_tests ...                               SUCCEEDED
Running geFileUtils_test ...                             SUCCEEDED
Running geImageWriter_unittest ...                       SUCCEEDED
Running geunittest ...                                   SUCCEEDED
Running gstGeode_unittest ...                            SUCCEEDED
Running gstGeometryChecker_unittest ...                  SUCCEEDED
Running gstGeomUtils_unittest ...                        SUCCEEDED
Running gstPolygonCleaner_unittest ...                   SUCCEEDED
Running gstPolygonClipper2_unittest ...                  SUCCEEDED
Running gstPolygonUtils_unittest ...                     SUCCEEDED
Running idl_tests ...                                    SUCCEEDED
Running IndexManifest_unittest ...                       SUCCEEDED
Running jpeg_comments_dates_unittest ...                 SUCCEEDED
Running JsUtils_unittest ...                             SUCCEEDED
Running khconfigparser_unittest ...                      SUCCEEDED
Running khfileutils_tests ...                            SUCCEEDED
Running khgdal_test ...                                  SUCCEEDED
Running khMisc_tests ...                                 SUCCEEDED
Running khStringUtils_test ...                           SUCCEEDED
Running khThread_unittest ...                            SUCCEEDED
Running khTimer_unittest ...                             SUCCEEDED
Running khxml_unittest ...                               SUCCEEDED
Running LeafAssetVersion_unittest ...                    SUCCEEDED
Running lockfileguard_tests ...                          SUCCEEDED
Running merge_unittest ...                               SUCCEEDED
Running multirange_tests ...                             SUCCEEDED
Running packetbundle_test ...                            SUCCEEDED
Running packetcompress_unittest ...                      SUCCEEDED
Running packetfile_unittest ...                          SUCCEEDED
Running parse-raster-project-xml-no-content_unittest ... DISABLED
Running performancelogger_unittest ...                   SUCCEEDED
Running polygontoqtnodes_unittest ...                    SUCCEEDED
Running polymask_unittest ...                            SUCCEEDED
Running portableglobebuilder_test ...                    SUCCEEDED
Running portablemapbuilder_test ...                      SUCCEEDED
Running procpidstats_unittest ...                        SUCCEEDED
Running projection_test ...                              SUCCEEDED
Running protobuf_unittest ...                            SUCCEEDED
Running qtutils_unittest ...                             SUCCEEDED
Running quadtree_builder_test ...                        SUCCEEDED
Running quadtree_utils_unittest ...                      SUCCEEDED
Running quadtreepath_unittest ...                        SUCCEEDED
Running rewritedbroot_unittest ...                       SUCCEEDED
Running segmented_array_tests ...                        SUCCEEDED
Running serverdbReader_unittest ...                      SUCCEEDED
Running sharedstring_unittest ...                        SUCCEEDED
Running simpleexception_unittest ...                     SUCCEEDED
Running StateUpdater_unittest ...                        SUCCEEDED
Running StorageManager_unittest ...                      SUCCEEDED
Running StorageManagerAssetFactory_unittest ...          SUCCEEDED
Running StorageManagerAssetHandle_unittest ...           SUCCEEDED
Running tile_resampler_unittest ...                      SUCCEEDED
Running tiledfloodfill_test ...                          SUCCEEDED
Running timeutils_unittest ...                           SUCCEEDED
Running tree_utils_unittest ...                          SUCCEEDED
Running uuid_unittest ...                                SUCCEEDED
Running verref_storage_unittest ...                      SUCCEEDED
Running WriterReader_tests ...                           SUCCEEDED
Running WriterReader_tests__port ...                     SUCCEEDED
</code></pre></div>
</td></tr></table>

<p>除 <code>parse-raster-project-xml-no-content_unittest</code> 项测试结果为 <code>DISABLED</code>（原因待查），其余全部成功。</p>
<h2 id="_3">四、文档编译<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="41">4.1 处理依赖关系<a class="headerlink" href="#41" title="Permanent link">&para;</a></h3>
<p><strong>OpenGEE 5.3.2</strong> 的文档已从 HTML 格式迁移到 <a href="https://docutils.sourceforge.io/rst.html">RST</a>（reStructuredText）格式，因此在编译文档前，需安装 <a href="http://www.sphinx-doc.org/en/master/">Sphinx</a> 依赖：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo apt install python-pip
sudo pip install <span class="nv">sphinx</span><span class="o">==</span><span class="m">1</span>.7.5
sudo pip install GitPython
sudo pip install sphinxprettysearchresults
</code></pre></div>
</td></tr></table>

<h3 id="42">4.2 文档组织结构<a class="headerlink" href="#42" title="Permanent link">&para;</a></h3>
<p><strong>OpenGEE 5.3.2</strong> 的文档组织结构如下：</p>
<ul>
<li>包括主要主题所有索引文件的 <code>index.rst</code> 文件存放在 <code>earthenterprise/docs/geedocs/docsrc</code> 目录内；</li>
<li><code>docsrc/answer</code> 目录下则存放有所有主题文件夹的索引文件；</li>
<li>每个主要主题的具体文档都存放于 <code>docsrc/answer</code> 下的对应文件夹中。</li>
</ul>
<p>例如，<code>docsrc/index.rst</code> 包含 <code>fusionTutorial.rst</code>（<code>fusionTutorial</code> 文件夹的索引文件），而 <code>fusionTutorial.rst</code> 则包含 <code>fusionTutorial</code> 文件夹中的所有 RST 文件。</p>
<h3 id="43">4.3 文档编译<a class="headerlink" href="#43" title="Permanent link">&para;</a></h3>
<p>终端输入如下命令对 <strong>OpenGEE 5.3.2</strong> 的文档进行编译：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> earthenterprise/docs/geedocs/docsrc
rm -rf build <span class="c1"># 若是编译修改后的文档，需删除之前的结果文件</span>
make html
</code></pre></div>
</td></tr></table>

<p>编译成功后，点击 <code>docsrc/build/html/index.html</code> ，则会通过浏览器打开说明文档。</p>
<h3 id="44">4.4 更改文档<a class="headerlink" href="#44" title="Permanent link">&para;</a></h3>
<p><strong>OpenGEE 5.3.2</strong> 的文档托管在 Github，用户可更新或增加现存文档（更改 RST 源文件），然后使用 Sphinx 生成 HTML。此外，还可通过 Git 将更改推送到 Github 仓库，详细操作参见：<a href="https://github.com/google/earthenterprise/blob/master/docs/geedocs/docsrc/BUILD_DOCS.md">Build Instructions for Open GEE Documentation</a>。</p>
<h2 id="_4">五、编译安装程序<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p><strong>OpenGEE</strong> 源码和文档编译成功后，还需要编译安装程序。目前安装程序已在 <a href="http://releases.ubuntu.com/trusty/">Ubuntu 14.04 LTS</a>、<a href="http://releases.ubuntu.com/xenial/">Ubuntu 16.04 LTS</a>、<a href="https://www.redhat.com/en">RHEL 6</a>、<a href="https://www.redhat.com/en">RHEL 7</a>、<a href="http://isoredirect.centos.org/centos/6">CentOS 6</a> 和 <a href="http://isoredirect.centos.org/centos/6">CentOS 7</a> 上成功测试。</p>
<p>安装软件包也是使用 SCons 构建的，默认的临时暂存区为 <code>/tmp/fusion_os_install</code>，由于缓存区在系统重启后会回收 <code>/tmp/fusion_os_install</code>，所以如果在构建好软件包后并未安装 Fusion 或 Server 就重启系统，重启后则需要重新构建安装软件包。可以通过指定 <code>installdir=target_dir</code> 参数来更改，其中 <code>target_dir</code> 为目标路径。但要注意，若修改了安装软件包路径，则后续的安装步骤必须使用相同的目录位置参数。</p>
<p>此外，在下面的命令中，可能需要将 <code>release=1</code> 更改为 <code>optimize=1</code>，具体情况取决于编译源代码时使用的参数，本文为 <code>release=1</code>。简而言之，应该对源代码和安装软件包使用相同的构建参数。</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1"># 准备教程文件, 也可手动下载（可选，若不准备，6.4小节无需安装）</span>
<span class="nb">cd</span> ~/earthenterprise/earth_enterprise/tutorial
wget http://data.opengee.org/FusionTutorial-Full.tar.gz
tar -xvzf FusionTutorial-Full.tar.gz -C FusionTutorial

<span class="c1"># 构建安装软件包</span>
<span class="nb">cd</span> ~/earthenterprise/earth_enterprise
scons -j4 <span class="nv">release</span><span class="o">=</span><span class="m">1</span> stage_install
</code></pre></div>
</td></tr></table>

<p>至此，安装软件包构建完毕，Fusion 和 Server 安装程序使用此软件包来安装各自的组件。</p>
<h2 id="fusion-server">六、安装 Fusion 与 Server<a class="headerlink" href="#fusion-server" title="Permanent link">&para;</a></h2>
<h3 id="61-fusion">6.1 安装 Fusion<a class="headerlink" href="#61-fusion" title="Permanent link">&para;</a></h3>
<p>运行下面的命令安装 Fusion：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> ~/earthenterprise/earth_enterprise/src/installer
sudo ./install_fusion.sh
</code></pre></div>
</td></tr></table>

<p>在执行安装命令前，可使用 <code>-h</code> 参数查看说明文档：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo ./install_fusion.sh -h
</code></pre></div>
</td></tr></table>

<p>本文输出结果如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>gee@spacefan:~/earthenterprise/earth_enterprise$ <span class="nb">cd</span> src/installer/
gee@spacefan:~/earthenterprise/earth_enterprise/src/installer$ sudo ./install_fusion.sh

Welcome to the Google Earth Enterprise Fusion <span class="m">5</span>.3.2 installer.

You have chosen to install Google Earth Enterprise Fusion with the following settings:

<span class="c1"># CPU&#39;s:        4</span>
Operating System:   Ubuntu <span class="m">16</span>.04
<span class="m">64</span> bit OS:      YES
Install Location:   /opt/google
Asset Root:         /gevol/assets
Source Volume:      /gevol/src
Fusion User:        gefusionuser
Fusion User Group:  gegroup
Disk Space:

Filesystem      Size  Used Avail Use% Mounted on
udev            <span class="m">1</span>.9G     <span class="m">0</span>  <span class="m">1</span>.9G   <span class="m">0</span>% /dev
tmpfs           393M  <span class="m">6</span>.2M  387M   <span class="m">2</span>% /run
/dev/sda1        49G   14G   33G  <span class="m">30</span>% /
tmpfs           <span class="m">2</span>.0G  212K  <span class="m">2</span>.0G   <span class="m">1</span>% /dev/shm
tmpfs           <span class="m">5</span>.0M  <span class="m">4</span>.0K  <span class="m">5</span>.0M   <span class="m">1</span>% /run/lock
tmpfs           <span class="m">2</span>.0G     <span class="m">0</span>  <span class="m">2</span>.0G   <span class="m">0</span>% /sys/fs/cgroup
tmpfs           393M   60K  393M   <span class="m">1</span>% /run/user/1000

X <span class="o">(</span>Exit<span class="o">)</span> the installer and cancel the installation - C <span class="o">(</span>Continue<span class="o">)</span> to install/upgrade. 
</code></pre></div>
</td></tr></table>

<p>若遇到如下错误：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>****Welcome to the Google Earth Enterprise Fusion <span class="m">5</span>.3.2 installer.

The hostname of this machine does not match the fully-qualified hostname.
requires that they match <span class="k">for</span> <span class="nb">local</span> publishing to <span class="k">function</span> properly.
Exiting the installer. If you wish to <span class="k">continue</span>, re-run this <span class="nb">command</span> with the -hnmf <span class="s1">&#39;Hostname Mismatch Override&#39;</span> flag.****
</code></pre></div>
</td></tr></table>

<p>参考 <strong>Open GEE 5.3.2</strong> 在 Github 上的 <a href="https://github.com/google/earthenterprise/issues/190">Issues #190</a> 和 <a href="https://github.com/google/earthenterprise/issues/246">Issues #246</a>，是由于本机 <code>hostname</code> 中含有大写字母引起的。参考 <a href="https://blog.csdn.net/dengjin20104042056/article/details/80462511">Ubuntu16.04修改主机名和查看主机名的方法</a> 将本机 <code>hostname</code> 修改成全部连续的小写字母即可。</p>
<p>安装完成后，安装脚本已将安装目录（默认为 <code>/opt/google/bin</code>）下的文件添加到 <code>/etc/profile.d</code> 中实现环境变量设置，但需要重新登录或重启才会生效。此时，若想直接运行 Fusion，可将 <code>/opt/google/bin</code> 加入用户 <code>bash shell</code> 环境变量：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/opt/google/bin
</code></pre></div>
</td></tr></table>

<p>或更加彻底一些，将 <code>/opt/google/bin</code> 加入用户系统环境变量：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>vim ~/.bashrc
</code></pre></div>
</td></tr></table>

<p>在末行加入：<code>export PATH=$PATH:/opt/google/bin</code>，然后更新环境变量：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">source</span> ~/.bashrc
</code></pre></div>
</td></tr></table>

<p>此时，在终端输入 <code>Fusion</code> 即可启动 Fusion，默认界面如下图所示：</p>
<p><img alt="Fusion启动后默认界面" src="../../img/OpenGEE/Fusion_start.png" /></p>
<h3 id="62-server">6.2 安装 Server<a class="headerlink" href="#62-server" title="Permanent link">&para;</a></h3>
<p>运行下面的命令安装 Server：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> ~/earthenterprise/earth_enterprise/src/installer
sudo ./install_server.sh
</code></pre></div>
</td></tr></table>

<p>同理，在执行安装命令前，可使用 <code>-h</code> 参数查看说明文档：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo ./install_server.sh -h
</code></pre></div>
</td></tr></table>

<p>本文输出结果如下：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>gee@spacefan:~/earthenterprise/earth_enterprise/src/installer$ sudo ./install_server.sh

Welcome to the Google Earth Enterprise Server <span class="m">5</span>.3.2 installer.

Checking geserver services:
postgres service: <span class="nb">false</span>
gehttpd service: <span class="nb">false</span>
wsgi service: <span class="nb">false</span>

You have chosen to install Google Earth Enterprise Server with the following settings:

<span class="c1"># CPU&#39;s:            4</span>
Operating System:       Ubuntu <span class="m">16</span>.04
<span class="m">64</span> bit OS:          YES
Publisher Root:         /gevol/published_dbs
Publisher Root Mount Point:     /
Install Location:       /opt/google
Postgres User:          gepguser
Apache User:            geapacheuser
Group:              gegroup
Disk Space:

Filesystem      Size  Used Avail Use% Mounted on
udev            <span class="m">1</span>.9G     <span class="m">0</span>  <span class="m">1</span>.9G   <span class="m">0</span>% /dev
tmpfs           393M  <span class="m">6</span>.2M  387M   <span class="m">2</span>% /run
/dev/sda1        49G   15G   32G  <span class="m">32</span>% /
tmpfs           <span class="m">2</span>.0G  212K  <span class="m">2</span>.0G   <span class="m">1</span>% /dev/shm
tmpfs           <span class="m">5</span>.0M  <span class="m">4</span>.0K  <span class="m">5</span>.0M   <span class="m">1</span>% /run/lock
tmpfs           <span class="m">2</span>.0G     <span class="m">0</span>  <span class="m">2</span>.0G   <span class="m">0</span>% /sys/fs/cgroup
tmpfs           393M   60K  393M   <span class="m">1</span>% /run/user/1000

X <span class="o">(</span>Exit<span class="o">)</span> the installer and cancel the installation - C <span class="o">(</span>Continue<span class="o">)</span> to install/upgrade. C

Proceeding with installation...

Copying files from <span class="nb">source</span> to target directories...DONE
Setting up system links...DONE
Starting server
waiting <span class="k">for</span> server to start.... <span class="k">done</span>
server started
Creating geserve-databases...
 create_or_update_tables 
-------------------------

<span class="o">(</span><span class="m">1</span> row<span class="o">)</span>

 create_tables 
---------------

<span class="o">(</span><span class="m">1</span> row<span class="o">)</span>

 run_searchdef_upsert 
----------------------

<span class="o">(</span><span class="m">1</span> row<span class="o">)</span>

CREATE EXTENSION
Done.
waiting <span class="k">for</span> server to shut down.... <span class="k">done</span>
server stopped
upgrade <span class="k">done</span>
pgsql_data
/var/opt/google/pgsql/data
The PostgreSQL component is successfully installed.
Setting up the geserver daemon...
GEE Server daemon setup ... DONE
Publishroot creation succeeded.
Please restart your server to apply the change.
<span class="c1"># a) Start the PSQL Server </span>
waiting <span class="k">for</span> server to start.... <span class="k">done</span>
server started
<span class="c1"># b) Install GEPlaces Database</span>
Creating GEPLACES database...
CREATE EXTENSION
<span class="c1"># c) Install SearchExample Database </span>
Creating SEARCH EXAMPLE database...
CREATE EXTENSION
<span class="c1"># d) Stop the PSQL Server</span>
waiting <span class="k">for</span> server to shut down.... <span class="k">done</span>
server stopped
Do you want to start the Google Earth Enterprise Server Service<span class="o">(</span>y/n<span class="o">)</span>?
y
--------------------------------------------------------------------
waiting <span class="k">for</span> server to start.... <span class="k">done</span>
server started

--------------------------------------------------------------------
Google Earth Enterprise Server <span class="k">for</span> Ubuntu
Starting gehttpd: SetGlobeDirectory: /opt/google/gehttpd/htdocs/cutter/globes/

--------------------------------------------------------------------
Done Starting Google Earth Enterprise Server


Checking geserver services:
postgres service: <span class="nb">true</span>
gehttpd service: <span class="nb">true</span>
wsgi service: <span class="nb">true</span>
Congratulations! Google Earth Enterprise has been successfully installed in the following directory:
          /opt/google 

          Start Google Earth Enterprise Server with the following command:
          /etc/init.d/geserver start
</code></pre></div>
</td></tr></table>

<p>安装好 Server 后可通过浏览 <code>localhost</code>（IP 地址为：<code>127.0.1.1</code>）打开服务器后台：</p>
<p><img alt="Open GEE Server" src="../../img/OpenGEE/Server_home.png" /></p>
<p>点击右上角 <code>Admin</code> 按钮，输入：</p>
<ul>
<li><u>Username</u>: <mark>geapacheuser</mark></li>
<li><u>Password</u>: <mark>geeadmin</mark></li>
</ul>
<p>即可进入后台。此外，可使用如下命令修改默认密码：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo /opt/google/gehttpd/bin/htpasswd -c /opt/google/gehttpd/conf.d/.htpasswd geapacheuser
</code></pre></div>
</td></tr></table>

<h3 id="63">6.3 安装运行时依赖<a class="headerlink" href="#63" title="Permanent link">&para;</a></h3>
<p><strong>OpenGEE</strong> 运行时依赖 Python 的 <code>PIL.Image</code> 模块，在 Ubuntu 上可安装 <code>python-pil</code>，在 Red Hat 平台上可安装 <code>python-imaging</code>。本文为：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo pip install python-pil
</code></pre></div>
</td></tr></table>

<h3 id="64">6.4 安装教程数据<a class="headerlink" href="#64" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo /opt/google/share/tutorials/fusion/download_tutorial.sh
</code></pre></div>
</td></tr></table>

<h3 id="65-fusion-server">6.5 卸载 Fusion 与 Server<a class="headerlink" href="#65-fusion-server" title="Permanent link">&para;</a></h3>
<p>若系统之前安装过早期版本的 <strong>OpenGEE</strong>，需要先将其卸载才能安装自建软件包。直接运行卸载脚本即可卸载 Fusion 和 Server：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo earth_enterprise/src/installer/uninstall_fusion.sh
sudo earth_enterprise/src/installer/uninstall_server.sh
</code></pre></div>
</td></tr></table>

<h2 id="portable-server">七、构建与安装 Portable Server<a class="headerlink" href="#portable-server" title="Permanent link">&para;</a></h2>
<p>Portable Server 是 <strong>OpenGEE</strong> 的本地数据服务器，用于在无法接入互联网的情况下访问离线图像数据库。</p>
<h3 id="71">7.1 依赖关系<a class="headerlink" href="#71" title="Permanent link">&para;</a></h3>
<p>Portable Server 构建依赖如下：</p>
<ul>
<li>Python 2.7</li>
<li>Python pexpect installed</li>
<li>Swig with support for Python</li>
<li>g++ (4.8 or later)</li>
</ul>
<p>Portable Server 运行时依赖如下：</p>
<ul>
<li>Python 2.7</li>
<li>Python tornado installed</li>
<li>Python Imaging Library (PIL) installed</li>
</ul>
<h3 id="72-linux-portable-server">7.2 Linux 下构建 Portable Server<a class="headerlink" href="#72-linux-portable-server" title="Permanent link">&para;</a></h3>
<p>首先需要处理依赖关系，确保系统安装有 Python 环境以及支持 Python 的三方模块 <code>pexpect</code>、<code>tornado</code>、<code>g++</code> 和 <code>Swig</code>。Ubuntu 下通过如下命令安装（RHEL 和 CentOS 参见：<a href="https://github.com/google/earthenterprise/wiki/Portable-Server#getting-a-build-environment">Getting a Build Environment</a>）：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo apt-get install g++ python python-pexpect python-tornado libpython-dev swig python-psycopg2
</code></pre></div>
</td></tr></table>

<p>随后运行 <code>build.py</code> 脚本进行构建：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>~/earthenterprise/earth_enterprise/src/portableserver/build.py
</code></pre></div>
</td></tr></table>

<p>该构建脚本将在 <code>earthenterprise/earth_enterprise/src/portableserver/build</code> 目录下生成两个文件夹和一个压缩文件，其中一个文件夹包含构建的安装文件，名称看起来像 <code>portableserver-linux-5.3.2-20200102</code>（文件名日期部分根据构建日期而变化），压缩文件与安装文件夹同名，格式为 <code>.tar.gz</code>，随后可使用安装文件夹和该压缩文件在具有 Portable Server 运行时环境的 Ubuntu16.04 LTS 上安装 Portable Server。</p>
<p>若构建过程中提示 <code>ImportError: No module named getversion</code>，则安装以下依赖：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>sudo pip install setuptools_scm
sudo pip install getversion
</code></pre></div>
</td></tr></table>

<p>若想清除构建文件，运行：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>earthenterprise/earth_enterprise/src/portableserver/build.py --clean
</code></pre></div>
</td></tr></table>

<h3 id="73-linux-portable-server">7.3 Linux 下安装 Portable Server<a class="headerlink" href="#73-linux-portable-server" title="Permanent link">&para;</a></h3>
<p>**OpenGEE ** 团队目前没有为 Linux 发行版提供 Portable Server 安装包，需用户自行构建，并将在 Linux 上构建中生成的压缩包解压到本地磁盘。为了方便起见，还可以创建链接或 Shell 启动脚本。</p>
<p>注意，在运行 Portable Server 之前必须处理好 Portable Server 运行时的依赖关系。如果之前执行过 Linux 上的构建流程，则系统已经安装所有必需的依赖项。</p>
<h3 id="74-linux-portable-server">7.4  Linux 下运行 Portable Server<a class="headerlink" href="#74-linux-portable-server" title="Permanent link">&para;</a></h3>
<p>切换到 Portable Server 安装包解压目录（如 <code>portableserver-linux-5.3.2-20200102</code>），运行：</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>server/portable_server.py
<span class="c1"># or</span>
<span class="nb">cd</span> server/
python portable_server.py
</code></pre></div>
</td></tr></table>

<p>用户可编辑 <code>portableserver-linux-5.3.2-20200102/server/portable.cfg</code> 和 <code>portableserver-linux-5.3.2-20200102/server/remote.cfg</code> 文件定制 Portable Server 启动设置。</p>
<h3 id="74-windows-portable-server">7.4 Windows 下构建与安装 Portable Server<a class="headerlink" href="#74-windows-portable-server" title="Permanent link">&para;</a></h3>
<p>参见：<a href="https://github.com/google/earthenterprise/wiki/Portable-Server#portable-server-on-windows">Portable Server on Windows</a>。</p>
<h3 id="75-mac-os-portable-server">7.5 Mac OS 下构建与安装 Portable Server<a class="headerlink" href="#75-mac-os-portable-server" title="Permanent link">&para;</a></h3>
<p>参见：<a href="https://github.com/google/earthenterprise/wiki/Portable-Server#portable-server-on-mac-os">Portable Server on Mac OS</a>。</p>
<p>当前，尚未测试在 Mac OS 上构建和运行 Portable Server 的过程。早期版本已在 Mac OS 上运行，并且 <code>build.py</code> 脚本含有未经测试的逻辑以运行 Mac OS 构建命令。但是，目前，用户必须自己修复在 Mac OS 上遇到的所有问题。</p>
<h2 id="_5">八、总结<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>本文根据官方说明文档在 Ubuntu 16.04.6 系统下实现了 <strong>OpenGEE 5.3.2</strong> 的源码编译、文档编译、软件包构建、软件包安装及便携式服务器的构建与安装，遇到的主要问题和解决方法如下：</p>
<ul>
<li>Github 仓库的克隆龟速，直接采用 <code>build</code> 发行版本进行构建；</li>
<li><code>hostname</code> 需修改为不含大写字母的连续字符串，否则需加 <code>-hnmf</code> 标识。</li>
</ul>
<p>更多关于 <strong>OpenGEE</strong> 的说明文档参见：<a href="https://www.opengee.org/geedocs/">Google Earth Enterprise Documentation</a>。</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../OpenGEE/" title="Introduction of OpenGEE" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                Introduction of OpenGEE
              </span>
            </div>
          </a>
        
        
          <a href="../../Cesium/Cesium/" title="Introduction of Cesium" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                Introduction of Cesium
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        <a href="http://intplanet.mgcsat.com/">InPlanet</a>
		由
        <a href="https://www.mkdocs.org">MkDocs</a>
        驱动，主题使用
        <a href="https://squidfunk.github.io/mkdocs-material/"> 
		Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/IntPlanet" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>